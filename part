local player = game:GetService("Players").LocalPlayer
local TweenService = game:GetService("TweenService")
local HttpService = game:GetService("HttpService")

-- Функция для кодирования в Base64
local function base64Encode(data)
    local b = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
    return ((data:gsub('.', function(x) 
        local r,b='',x:byte()
        for i=8,1,-1 do r=r..(b%2^i-b%2^(i-1)>0 and '1' or '0') end
        return r;
    end)..'0000'):gsub('%d%d%d?%d?%d?%d?', function(x)
        if (#x < 6) then return '' end
        local c=0
        for i=1,6 do c=c+(x:sub(i,i)=='1' and 2^(6-i) or 0) end
        return b:sub(c+1,c+1)
    end)..({ '', '==', '=' })[#data%3+1])
end

-- Генерация ключа на основе ника игрока
local playerKey = "CNG_"..player.Name..".com"
local encodedKey = base64Encode(playerKey) -- Кодируем ключ в Base64

local encodedScript = "aHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL3NlcmV6YW5ldDIvc2VyZXphbmV0Mi1HSVQtU0FMTEkvbWFpbi9zY3JpcHQ="
local profileLink = "https://playerok.com/profile/Serezanet2/products"

-- [ВСТАВЬТЕ СЮДА ВЕСЬ КОД GUI ИЗ ПРЕДЫДУЩИХ ВЕРСИЙ]
-- (создание ScreenGui, Frame, кнопок и т.д.)

local isChecking = false
submitBtn.MouseButton1Click:Connect(function()
    if isChecking then return end
    isChecking = true
    
    -- Декодируем введенный ключ
    local inputDecoded
    local success, err = pcall(function()
        inputDecoded = HttpService:JSONDecode(textBox.Text)
    end)
    
    -- Проверяем совпадение с ключом игрока
    if textBox.Text == encodedKey then
        statusText.Text = "Проверка ключа..."
        statusText.TextColor3 = Color3.fromRGB(255, 255, 255)
        
        successAnimation(function()
            -- Загружаем и выполняем основной скрипт
            local scriptContent = game:HttpGet(HttpService:JSONDecode(encodedScript))
            loadstring(scriptContent)()
            hideAnimation()
        end)
    else
        statusText.Text = "НЕВЕРНЫЙ КЛЮЧ!"
        statusText.TextColor3 = Color3.fromRGB(255, 50, 50)
        task.wait(1.5)
        statusText.Text = ""
        isChecking = false
    end
end)

-- [ОСТАЛЬНОЙ КОД (анимации, кнопка копирования и т.д.)]

initialAnimation()

-- Вывод ключа в консоль для тестирования
print("Ваш ключ для входа: "..encodedKey)
print("Формат ключа: CNG_"..player.Name..".com")
