local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- GUI
local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local TextLabel = Instance.new("TextLabel")
local TextBox = Instance.new("TextBox")
local SubmitButton = Instance.new("TextButton")

ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.Name = "IPCheckGUI"

Frame.Parent = ScreenGui
Frame.Size = UDim2.new(0, 350, 0, 200)
Frame.Position = UDim2.new(0.5, -175, 0.5, -100)
Frame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)

TextLabel.Parent = Frame
TextLabel.Size = UDim2.new(0.9, 0, 0.4, 0)
TextLabel.Position = UDim2.new(0.05, 0, 0.1, 0)
TextLabel.Text = "Введите последние 3 цифры вашего IP:"
TextLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
TextLabel.BackgroundTransparency = 1
TextLabel.TextWrapped = true

TextBox.Parent = Frame
TextBox.Size = UDim2.new(0.8, 0, 0.2, 0)
TextBox.Position = UDim2.new(0.1, 0, 0.5, 0)
TextBox.PlaceholderText = "Например: 123"
TextBox.Text = ""
TextBox.ClearTextOnFocus = false

SubmitButton.Parent = Frame
SubmitButton.Size = UDim2.new(0.6, 0, 0.2, 0)
SubmitButton.Position = UDim2.new(0.2, 0, 0.75, 0)
SubmitButton.Text = "Подтвердить"
SubmitButton.TextColor3 = Color3.fromRGB(255, 255, 255)
SubmitButton.BackgroundColor3 = Color3.fromRGB(0, 120, 0)

-- Здесь можно вручную задать IP (если HTTP не работает)
local ipAddress = "192.168.1.123" -- Замени на свой IP!
local lastThreeDigits = string.sub(ipAddress, -3)

SubmitButton.MouseButton1Click:Connect(function()
    if TextBox.Text == lastThreeDigits then
        ScreenGui:Destroy()
        print("✅ IP подтвержден!")
    else
        TextBox.Text = ""
        TextBox.PlaceholderText = "Ошибка! Нужно: " .. lastThreeDigits
    end
end)

TextBox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        if TextBox.Text == lastThreeDigits then
            ScreenGui:Destroy()
        else
            TextBox.Text = ""
            TextBox.PlaceholderText = "Неверно! Попробуйте снова"
        end
    end
end)
